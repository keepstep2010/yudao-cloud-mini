import{bl as V,bm as J,g as K,a as z,d as k,aZ as U,R as r,ap as Z,a_ as H,aI as L,y as Q,T as X,I as E,bn as M,bo as j,bp as Y,bq as ee,J as te,c as B,S as ae,K as ne,q as x,s as c,aV as le}from"./index-SNKBwPMT.js";var w,P;function se(){if(P)return w;P=1;var m=Math.max,l=Math.min;function e(t,n,o){return t>=l(n,o)&&t<m(n,o)}return w=e,w}var D,W;function oe(){if(W)return D;W=1;var m=se(),l=V(),e=J();function t(n,o,a){return o=l(o),a===void 0?(a=o,o=0):a=l(a),n=e(n),m(n,o,a)}return D=t,D}var ie=oe();const re=K(ie);var ce=(function(m){z(l,m);function l(){var e=m!==null&&m.apply(this,arguments)||this;return e.checkboxRef=r.createRef(),e.childRefs=[],e}return l.prototype.doAction=function(e,t,n){var o,a,s=this.props,h=s.resetValue,u=s.onChange,d=s.formStore,p=s.store,f=s.name,C=e?.actionType;if(C==="clear")u("");else if(C==="reset"){var v=(a=Z((o=d?.pristine)!==null&&o!==void 0?o:p?.pristine,f))!==null&&a!==void 0?a:h;u(v??"")}},l.prototype.reload=function(e,t){var n=this.props.reloadOptions;n&&n(e,t)},l.prototype.handleAddClick=function(){var e=this.props.onAdd;e&&e()},l.prototype.handleEditClick=function(e,t){var n=this.props.onEdit;e.preventDefault(),e.stopPropagation(),n&&n(t)},l.prototype.handleDeleteClick=function(e,t){var n=this.props.onDelete;e.preventDefault(),e.stopPropagation(),n&&n(t)},l.prototype.componentDidMount=function(){this.updateBorderStyle();var e=H(this.updateBorderStyle,100);this.checkboxRef.current&&(this.checkboxRefObserver=new ResizeObserver(e),this.checkboxRefObserver.observe(this.checkboxRef.current))},l.prototype.componentWillUnmount=function(){var e;(e=this.checkboxRefObserver)===null||e===void 0||e.disconnect()},l.prototype.updateBorderStyle=function(){if(this.props.optionType==="button"&&this.childRefs.length){var e=this.childRefs.map(function(d){return d?.ref}),t=e[0].labelRef.current.offsetTop,n=[],o=e.length;n[0]="first";for(var a=0,s=1;s<o;s++){var h=e[s],u=h.labelRef.current.offsetTop;n[s]="",u!==t&&(n[s]="first",n[s-1]+=" last",a=s,t=u)}n[o-1]+=" last",n.forEach(function(d,p){p>=a&&(d+=" last-line"),e[p].setClassName(d)})}},l.prototype.renderGroup=function(e,t){var n=this,o,a=this.props,s=a.classnames,h=a.labelField;if(!(!((o=e.children)===null||o===void 0)&&o.length))return null;var u=e.children.map(function(p,f){return n.renderItem(p,f)}),d=this.columnsSplit(u);return r.createElement("div",{key:"group-"+t,className:s("CheckboxesControl-group",e.className)},r.createElement("label",{className:s("CheckboxesControl-groupLabel",e.labelClassName)},e[h||"label"]),d)},l.prototype.addChildRefs=function(e){e&&this.childRefs.push(e)},l.prototype.renderItem=function(e,t){var n=this,o;if(!((o=e.children)===null||o===void 0)&&o.length)return this.renderGroup(e,t);var a=this.props,s=a.render,h=a.itemClassName,u=a.onToggle,d=a.selectedOptions,p=a.disabled,f=a.inline,C=a.labelClassName,v=a.labelField,_=a.removable,S=a.editable,I=a.translate,F=a.optionType,g=a.menuTpl,A=a.data,N=a.classnames,y=a.testIdBuilder,R=String(e[v||"label"]),T=e.labelClassName,O=y?.getChild("item-"+R||t),i=p||e.disabled;return r.createElement(L,{className:h,key:t,onChange:function(){return u(e)},checked:!!~d.indexOf(e),disabled:i,inline:f,labelClassName:T||C,description:e.description,optionType:F,testIdBuilder:O,ref:this.addChildRefs},g?s("checkboxes/".concat(t),g,{data:Q(A,e)}):R,e.disabledTip&&i?r.createElement(X,{placement:"right",tooltip:e.disabledTip,trigger:"hover"},r.createElement("a",{className:N("Select-option-disabledTip")},r.createElement(E,{className:"icon",icon:"question2"}))):null,_&&M(e,"removable")?r.createElement("a",{"data-tooltip":I("Select.clear"),"data-position":"left"},r.createElement(E,{icon:"minus",className:"icon",onClick:function(b){return n.handleDeleteClick(b,e)}})):null,S&&M(e,"editable")?r.createElement("a",{"data-tooltip":"编辑","data-position":"left"},r.createElement(E,{icon:"pencil",className:"icon",onClick:function(b){return n.handleEditClick(b,e)}})):null)},l.prototype.columnsSplit=function(e){var t=this.props,n=t.columnsCount,o=t.classnames,a=[],s=[];return e.forEach(function(h){h&&h.key&&String(h.key).startsWith("group")?(s.length&&(a.push(j(s,o,n)),s=[]),a.push(h)):s.push(h)}),s.length&&a.push(j(s,o,n)),a},l.prototype.render=function(){var e=this,t=this.props,n=t.className;t.style;var o=t.disabled,a=t.placeholder,s=t.options,h=t.inline;t.columnsCount;var u=t.selectedOptions;t.onToggle;var d=t.onToggleAll,p=t.checkAll,f=t.checkAllText,C=t.classnames,v=t.itemClassName,_=t.labelClassName,S=t.creatable,I=t.addApi,F=t.createBtnLabel,g=t.translate,A=t.optionType,N=t.loading,y=t.loadingConfig,R=t.themeCss,T=t.id,O=t.env,i=t.classPrefix,b=[];s&&s.length&&(b=s.map(function($,G){return e.renderItem($,G)})),p&&b.length&&A==="default"&&b.unshift(r.createElement(L,{key:"checkall",className:v,onChange:d,checked:!!u.length,partial:re(u.length,0,Y(s).length),disabled:o,inline:h,labelClassName:_},f??g("Checkboxes.selectAll"))),b=this.columnsSplit(b);var q=ee(R,"checkboxes");return r.createElement("div",{className:C("CheckboxesControl",n,te(B(B({},this.props),{name:["checkboxesControlClassName","checkboxesControlCheckedClassName","checkboxesClassName","checkboxesCheckedClassName","checkboxesInnerClassName","checkboxesShowClassName"],id:T,themeCss:q}))),ref:this.checkboxRef},b&&b.length?b:N?null:r.createElement("span",{className:"Form-placeholder"},g(a)),N?r.createElement(ae,{show:!0,icon:"reload",size:"sm",spinnerClassName:C("Checkboxes-spinner"),loadingConfig:y}):null,(S||I)&&!o?r.createElement("a",{className:C("Checkboxes-addBtn"),onClick:this.handleAddClick},r.createElement(E,{icon:"plus",className:"icon"}),g(F)):null,r.createElement(ne,B({},this.props,{config:{themeCss:q,classNames:[{key:"checkboxesControlClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.checked):not(.disabled)")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled):not(.checked)")},disabled:{inner:".".concat(i,"Checkbox.disabled:not(.checked)")}}},{key:"checkboxesControlCheckedClassName",weights:{default:{inner:".".concat(i,"Checkbox.checked:not(.disabled)")},hover:{suf:" .".concat(i,"Checkbox.checked:not(.disabled)")},disabled:{inner:".".concat(i,"Checkbox.checked.disabled")}}},{key:"checkboxesClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.checked):not(.disabled) > i")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled):not(.checked)"),inner:"> i"},disabled:{inner:".".concat(i,"Checkbox.disabled:not(.checked) > i")}}},{key:"checkboxesCheckedClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.disabled) > i")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled)"),inner:"> i"},disabled:{inner:".".concat(i,"Checkbox.disabled > i")}}},{key:"checkboxesInnerClassName",weights:{default:{inner:".".concat(i,"Checkbox:not(.disabled) > i .icon")},hover:{suf:" .".concat(i,"Checkbox:not(.disabled)"),inner:"> i .icon"},disabled:{inner:".".concat(i,"Checkbox.disabled > i .icon")}}},{key:"checkboxesShowClassName",weights:{default:{inner:".".concat(i,"Checkbox > i")}}}],id:T},env:O})))},l.defaultProps={columnsCount:1,multiple:!0,placeholder:"placeholder.noOption",creatable:!1,inline:!0,createBtnLabel:"Select.createLabel",optionType:"default"},k([x,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],l.prototype,"handleAddClick",null),k([x,c("design:type",Function),c("design:paramtypes",[Event,Object]),c("design:returntype",void 0)],l.prototype,"handleEditClick",null),k([x,c("design:type",Function),c("design:paramtypes",[Event,Object]),c("design:returntype",void 0)],l.prototype,"handleDeleteClick",null),k([x,c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],l.prototype,"updateBorderStyle",null),k([x,c("design:type",Function),c("design:paramtypes",[Object]),c("design:returntype",void 0)],l.prototype,"addChildRefs",null),k([le(),c("design:type",Function),c("design:paramtypes",[]),c("design:returntype",void 0)],l.prototype,"render",null),l})(r.Component),he=(function(m){z(l,m);function l(){return m!==null&&m.apply(this,arguments)||this}return l=k([U({type:"checkboxes",sizeMutable:!1,thin:!0})],l),l})(ce);export{he as CheckboxesControlRenderer,ce as default};
