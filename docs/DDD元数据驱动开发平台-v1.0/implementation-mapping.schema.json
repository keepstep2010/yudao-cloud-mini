{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/ddd-metamodel/2.0/implementation-mapping.schema.json",
  "title": "实现映射定义",
  "description": "领域模型到实现技术的映射定义 - v2.0",
  "version": "2.0.0",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "模式版本",
      "const": "2.0.0"
    },
    "domainId": {
      "type": "string",
      "pattern": "^domain_[a-zA-Z0-9_]+$",
      "description": "所属领域ID（可选，在战略设计完成后必填）"
    },
    "boundedContextId": {
      "type": "string",
      "pattern": "^bc_[a-zA-Z0-9_]+$",
      "description": "所属限界上下文ID（可选，在战略设计完成后必填）"
    },
    "architectureMapping": {
      "$ref": "#/$defs/architectureMapping"
    },
    "dtoMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/dtoMapping"
      },
      "description": "DTO映射列表"
    },
    "persistenceMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/persistenceMapping"
      },
      "description": "持久化映射列表"
    },
    "integrationMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/integrationMapping"
      },
      "description": "集成映射列表"
    },
    "screenMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/screenMapping"
      },
      "description": "屏幕映射列表"
    },
    "apiMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/apiMapping"
      },
      "description": "API映射列表"
    },
    "eventMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/eventMapping"
      },
      "description": "事件映射列表"
    },
    "securityMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/securityMapping"
      },
      "description": "安全映射列表"
    },
    "monitoringMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/monitoringMapping"
      },
      "description": "监控映射列表"
    },
    "validationStage": {
      "type": "string",
      "enum": ["DRAFT", "STRATEGIC_COMPLETE", "TACTICAL_COMPLETE", "DTO_COMPLETE", "COMPLETE"],
      "description": "验证阶段：DRAFT(草稿)、STRATEGIC_COMPLETE(战略设计完成)、TACTICAL_COMPLETE(战术设计完成)、DTO_COMPLETE(DTO完成)、COMPLETE(完整)"
    },
    "validationRules": {
      "type": "object",
      "properties": {
        "requireDomainId": {
          "type": "boolean",
          "description": "是否要求domainId（在STRATEGIC_COMPLETE阶段后为true）"
        },
        "requireBoundedContextId": {
          "type": "boolean",
          "description": "是否要求boundedContextId（在STRATEGIC_COMPLETE阶段后为true）"
        },
        "requireDtoReferences": {
          "type": "boolean",
          "description": "是否要求DTO引用（在DTO_COMPLETE阶段后为true）"
        },
        "requireEntityReferences": {
          "type": "boolean",
          "description": "是否要求实体引用（在TACTICAL_COMPLETE阶段后为true）"
        },
        "crossReferenceValidation": {
          "type": "boolean",
          "description": "是否启用跨Schema引用验证"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["version"],
  "additionalProperties": false,
  "$defs": {
    "architectureMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^arch_mapping_[a-zA-Z0-9_]+$",
          "description": "架构映射ID"
        },
        "name": {
          "type": "string",
          "description": "架构映射名称"
        },
        "description": {
          "type": "string",
          "description": "架构映射描述"
        },
        "architecturePattern": {
          "type": "string",
          "enum": ["COLA", "HEXAGONAL", "CLEAN", "LAYERED", "MICROSERVICE", "EVENT_DRIVEN"],
          "description": "架构模式"
        },
        "layers": {
          "type": "object",
          "properties": {
            "presentationLayer": {
              "$ref": "#/$defs/architectureLayer"
            },
            "applicationLayer": {
              "$ref": "#/$defs/architectureLayer"
            },
            "domainLayer": {
              "$ref": "#/$defs/architectureLayer"
            },
            "infrastructureLayer": {
              "$ref": "#/$defs/architectureLayer"
            }
          },
          "additionalProperties": false
        },
        "dependencies": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/architectureDependency"
          },
          "description": "层间依赖关系"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "architecturePattern"],
      "additionalProperties": false
    },
    "architectureLayer": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^layer_[a-zA-Z0-9_]+$",
          "description": "架构层ID"
        },
        "name": {
          "type": "string",
          "description": "架构层名称"
        },
        "description": {
          "type": "string",
          "description": "架构层描述"
        },
        "responsibilities": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "职责列表"
        },
        "components": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/architectureComponent"
          },
          "description": "组件列表"
        },
        "interfaces": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/architectureInterface"
          },
          "description": "接口列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    },
    "architectureComponent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^comp_[a-zA-Z0-9_]+$",
          "description": "组件ID"
        },
        "name": {
          "type": "string",
          "description": "组件名称"
        },
        "description": {
          "type": "string",
          "description": "组件描述"
        },
        "type": {
          "type": "string",
          "enum": ["INTERFACE", "CLASS", "DTO", "ENUM", "ANNOTATION", "SERVICE", "REPOSITORY", "CONTROLLER", "FACADE"],
          "description": "组件类型"
        },
        "packageName": {
          "type": "string",
          "description": "包名"
        },
        "className": {
          "type": "string",
          "description": "类名"
        },
        "implements": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "实现的接口"
        },
        "extends": {
          "type": "string",
          "description": "继承的类"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "注解列表"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentMethod"
          },
          "description": "方法列表"
        },
        "fields": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentField"
          },
          "description": "字段列表"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "依赖的组件ID"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "architectureInterface": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^interface_[a-zA-Z0-9_]+$",
          "description": "接口ID"
        },
        "name": {
          "type": "string",
          "description": "接口名称"
        },
        "description": {
          "type": "string",
          "description": "接口描述"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/interfaceMethod"
          },
          "description": "方法列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    },
    "architectureDependency": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^dep_[a-zA-Z0-9_]+$",
          "description": "依赖关系ID"
        },
        "sourceLayerId": {
          "type": "string",
          "pattern": "^layer_[a-zA-Z0-9_]+$",
          "description": "源层ID"
        },
        "targetLayerId": {
          "type": "string",
          "pattern": "^layer_[a-zA-Z0-9_]+$",
          "description": "目标层ID"
        },
        "dependencyType": {
          "type": "string",
          "enum": ["DIRECT", "INVERSE", "BIDIRECTIONAL"],
          "description": "依赖类型"
        },
        "description": {
          "type": "string",
          "description": "依赖描述"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "sourceLayerId", "targetLayerId", "dependencyType"],
      "additionalProperties": false
    },
    "componentAnnotation": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^annotation_[a-zA-Z0-9_]+$",
          "description": "注解ID"
        },
        "name": {
          "type": "string",
          "description": "注解名称"
        },
        "parameters": {
          "type": "object",
          "description": "注解参数"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    },
    "componentMethod": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^method_[a-zA-Z0-9_]+$",
          "description": "方法ID"
        },
        "name": {
          "type": "string",
          "description": "方法名称"
        },
        "description": {
          "type": "string",
          "description": "方法描述"
        },
        "visibility": {
          "type": "string",
          "enum": ["PUBLIC", "PROTECTED", "PRIVATE", "PACKAGE"],
          "description": "访问修饰符"
        },
        "returnType": {
          "type": "string",
          "description": "返回类型"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/methodParameter"
          },
          "description": "参数列表"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "方法注解"
        },
        "exceptions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "异常列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "visibility"],
      "additionalProperties": false
    },
    "componentField": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^field_[a-zA-Z0-9_]+$",
          "description": "字段ID"
        },
        "name": {
          "type": "string",
          "description": "字段名称"
        },
        "description": {
          "type": "string",
          "description": "字段描述"
        },
        "type": {
          "type": "string",
          "description": "字段类型"
        },
        "visibility": {
          "type": "string",
          "enum": ["PUBLIC", "PROTECTED", "PRIVATE", "PACKAGE"],
          "description": "访问修饰符"
        },
        "isFinal": {
          "type": "boolean",
          "description": "是否final"
        },
        "isStatic": {
          "type": "boolean",
          "description": "是否static"
        },
        "defaultValue": {
          "type": ["string", "number", "boolean", "object"],
          "description": "默认值"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "字段注解"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "interfaceMethod": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^interface_method_[a-zA-Z0-9_]+$",
          "description": "接口方法ID"
        },
        "name": {
          "type": "string",
          "description": "方法名称"
        },
        "description": {
          "type": "string",
          "description": "方法描述"
        },
        "returnType": {
          "type": "string",
          "description": "返回类型"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/methodParameter"
          },
          "description": "参数列表"
        },
        "exceptions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "异常列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name"],
      "additionalProperties": false
    },
    "methodParameter": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^param_[a-zA-Z0-9_]+$",
          "description": "参数ID"
        },
        "name": {
          "type": "string",
          "description": "参数名称"
        },
        "type": {
          "type": "string",
          "description": "参数类型"
        },
        "description": {
          "type": "string",
          "description": "参数描述"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必需"
        },
        "defaultValue": {
          "type": ["string", "number", "boolean", "object"],
          "description": "默认值"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "参数注解"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "dtoMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^dto_mapping_[a-zA-Z0-9_]+$",
          "description": "DTO映射ID"
        },
        "dtoId": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "DTO ID"
        },
        "className": {
          "type": "string",
          "description": "生成的类名"
        },
        "packageName": {
          "type": "string",
          "description": "包名"
        },
        "layer": {
          "type": "string",
          "enum": ["PRESENTATION", "APPLICATION", "DOMAIN", "INFRASTRUCTURE"],
          "description": "所在架构层"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "类级别注解"
        },
        "serializationConfig": {
          "$ref": "#/$defs/serializationConfig"
        },
        "validationConfig": {
          "$ref": "#/$defs/validationConfig"
        },
        "builderConfig": {
          "$ref": "#/$defs/builderConfig"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/dtoAttributeMapping"
          },
          "description": "属性映射列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "dtoId", "className", "packageName", "layer"],
      "additionalProperties": false
    },
    "serializationConfig": {
      "type": "object",
      "properties": {
        "format": {
          "type": "string",
          "enum": ["JSON", "XML", "PROTOBUF", "AVRO", "YAML", "NONE"],
          "description": "序列化格式"
        },
        "library": {
          "type": "string",
          "enum": ["JACKSON", "GSON", "JAXB", "PROTOBUF_LIB", "FASTJSON", "NONE"],
          "description": "序列化库"
        },
        "includeTypeInfo": {
          "type": "boolean",
          "description": "是否包含类型信息"
        },
        "dateFormat": {
          "type": "string",
          "description": "日期格式"
        },
        "timeZone": {
          "type": "string",
          "description": "时区"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["format", "library"],
      "additionalProperties": false
    },
    "validationConfig": {
      "type": "object",
      "properties": {
        "framework": {
          "type": "string",
          "enum": ["JSR303", "JSR380", "CUSTOM", "NONE"],
          "description": "验证框架"
        },
        "groups": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "验证组"
        },
        "validateOnBuild": {
          "type": "boolean",
          "description": "是否在构建时验证"
        },
        "validateOnRuntime": {
          "type": "boolean",
          "description": "是否在运行时验证"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["framework"],
      "additionalProperties": false
    },
    "builderConfig": {
      "type": "object",
      "properties": {
        "generateBuilder": {
          "type": "boolean",
          "description": "是否生成构建器"
        },
        "builderName": {
          "type": "string",
          "description": "构建器类名"
        },
        "builderMethod": {
          "type": "string",
          "description": "构建器方法名"
        },
        "toBuilder": {
          "type": "boolean",
          "description": "是否生成toBuilder方法"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["generateBuilder"],
      "additionalProperties": false
    },
    "dtoAttributeMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^dto_attr_mapping_[a-zA-Z0-9_]+$",
          "description": "DTO属性映射ID"
        },
        "attributeName": {
          "type": "string",
          "description": "属性名称"
        },
        "fieldName": {
          "type": "string",
          "description": "字段名称"
        },
        "fieldType": {
          "type": "string",
          "description": "字段类型"
        },
        "annotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "字段注解"
        },
        "getter": {
          "type": "boolean",
          "description": "是否生成getter方法"
        },
        "setter": {
          "type": "boolean",
          "description": "是否生成setter方法"
        },
        "validationAnnotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "验证注解"
        },
        "serializationAnnotations": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/componentAnnotation"
          },
          "description": "序列化注解"
        },
        "defaultValue": {
          "type": ["string", "number", "boolean", "object"],
          "description": "默认值"
        },
        "isFinal": {
          "type": "boolean",
          "description": "是否final"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "attributeName", "fieldName", "fieldType"],
      "additionalProperties": false
    },
    "persistenceMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^persistence_mapping_[a-zA-Z0-9_]+$",
          "description": "持久化映射ID"
        },
        "entityId": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "实体ID"
        },
        "tableName": {
          "type": "string",
          "description": "表名"
        },
        "schema": {
          "type": "string",
          "description": "数据库模式"
        },
        "columns": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/columnMapping"
          },
          "description": "列映射列表"
        },
        "indexes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/indexMapping"
          },
          "description": "索引映射列表"
        },
        "constraints": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/constraintMapping"
          },
          "description": "约束映射列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "entityId", "tableName"],
      "additionalProperties": false
    },
    "columnMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^column_mapping_[a-zA-Z0-9_]+$",
          "description": "列映射ID"
        },
        "attributeName": {
          "type": "string",
          "description": "属性名称"
        },
        "columnName": {
          "type": "string",
          "description": "列名"
        },
        "columnType": {
          "type": "string",
          "description": "列类型"
        },
        "primaryKey": {
          "type": "boolean",
          "description": "是否主键"
        },
        "nullable": {
          "type": "boolean",
          "description": "是否可为空"
        },
        "length": {
          "type": "integer",
          "description": "长度限制"
        },
        "precision": {
          "type": "integer",
          "description": "精度"
        },
        "scale": {
          "type": "integer",
          "description": "小数位数"
        },
        "defaultValue": {
          "type": ["string", "number", "boolean"],
          "description": "默认值"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "attributeName", "columnName", "columnType"],
      "additionalProperties": false
    },
    "indexMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^index_mapping_[a-zA-Z0-9_]+$",
          "description": "索引映射ID"
        },
        "name": {
          "type": "string",
          "description": "索引名称"
        },
        "type": {
          "type": "string",
          "enum": ["PRIMARY", "UNIQUE", "NORMAL", "FULLTEXT"],
          "description": "索引类型"
        },
        "columns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "索引列名列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type", "columns"],
      "additionalProperties": false
    },
    "constraintMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^constraint_mapping_[a-zA-Z0-9_]+$",
          "description": "约束映射ID"
        },
        "name": {
          "type": "string",
          "description": "约束名称"
        },
        "type": {
          "type": "string",
          "enum": ["FOREIGN_KEY", "CHECK", "UNIQUE", "NOT_NULL"],
          "description": "约束类型"
        },
        "expression": {
          "type": "string",
          "description": "约束表达式"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "integrationMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^integration_mapping_[a-zA-Z0-9_]+$",
          "description": "集成映射ID"
        },
        "targetContextId": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "目标上下文ID"
        },
        "protocol": {
          "type": "string",
          "enum": ["REST", "RPC", "MESSAGE", "FILE", "GRAPHQL"],
          "description": "集成协议"
        },
        "endpoints": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/endpoint"
          },
          "description": "端点列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "targetContextId", "protocol"],
      "additionalProperties": false
    },
    "endpoint": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^endpoint_[a-zA-Z0-9_]+$",
          "description": "端点ID"
        },
        "name": {
          "type": "string",
          "description": "端点名称"
        },
        "url": {
          "type": "string",
          "description": "端点URL"
        },
        "method": {
          "type": "string",
          "enum": ["GET", "POST", "PUT", "DELETE", "PATCH", "HEAD", "OPTIONS"],
          "description": "HTTP方法"
        },
        "request": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/requestParameter"
          },
          "description": "请求参数列表"
        },
        "response": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/responseParameter"
          },
          "description": "响应参数列表"
        },
        "fallback": {
          "type": "string",
          "description": "降级处理类"
        },
        "timeout": {
          "type": "integer",
          "description": "超时时间(毫秒)"
        },
        "retryCount": {
          "type": "integer",
          "description": "重试次数"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "url", "method"],
      "additionalProperties": false
    },
    "requestParameter": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^req_param_[a-zA-Z0-9_]+$",
          "description": "请求参数ID"
        },
        "name": {
          "type": "string",
          "description": "参数名称"
        },
        "type": {
          "type": "string",
          "description": "参数类型"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必需"
        },
        "defaultValue": {
          "type": ["string", "number", "boolean", "object"],
          "description": "默认值"
        },
        "description": {
          "type": "string",
          "description": "参数描述"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "responseParameter": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^resp_param_[a-zA-Z0-9_]+$",
          "description": "响应参数ID"
        },
        "name": {
          "type": "string",
          "description": "参数名称"
        },
        "type": {
          "type": "string",
          "description": "参数类型"
        },
        "description": {
          "type": "string",
          "description": "参数描述"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "screenMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^screen_mapping_[a-zA-Z0-9_]+$",
          "description": "屏幕映射ID"
        },
        "screenId": {
          "type": "string",
          "pattern": "^screen_[a-zA-Z0-9_]+$",
          "description": "关联的屏幕ID"
        },
        "endpointId": {
          "type": "string",
          "pattern": "^endpoint_[a-zA-Z0-9_]+$",
          "description": "关联的端点ID"
        },
        "mappingType": {
          "type": "string",
          "enum": ["READ", "WRITE", "BOTH"],
          "description": "映射类型"
        },
        "dtoMapping": {
          "$ref": "#/$defs/screenDtoMapping"
        },
        "uiBehavior": {
          "$ref": "#/$defs/uiBehavior"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "screenId", "endpointId", "mappingType"],
      "additionalProperties": false
    },
    "screenDtoMapping": {
      "type": "object",
      "properties": {
        "requestDto": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "请求DTO ID"
        },
        "responseDto": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "响应DTO ID"
        },
        "fieldMappings": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/screenFieldMapping"
          },
          "description": "字段映射列表"
        }
      },
      "required": ["requestDto", "responseDto"],
      "additionalProperties": false
    },
    "uiBehavior": {
      "type": "object",
      "properties": {
        "loadingState": {
          "type": "boolean",
          "description": "是否显示加载状态"
        },
        "successMessage": {
          "type": "string",
          "description": "成功消息"
        },
        "errorMessage": {
          "type": "string",
          "description": "错误消息"
        },
        "confirmationRequired": {
          "type": "boolean",
          "description": "是否需要确认"
        },
        "redirectAfterSuccess": {
          "type": "string",
          "description": "成功后重定向路径"
        },
        "refreshAfterSuccess": {
          "type": "boolean",
          "description": "成功后是否刷新"
        }
      },
      "additionalProperties": false
    },
    "screenFieldMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^field_mapping_[a-zA-Z0-9_]+$",
          "description": "字段映射ID"
        },
        "screenFieldId": {
          "type": "string",
          "pattern": "^field_[a-zA-Z0-9_]+$",
          "description": "屏幕字段ID"
        },
        "dtoAttributeName": {
          "type": "string",
          "description": "DTO属性名"
        },
        "dataType": {
          "type": "string",
          "description": "数据类型"
        },
        "transformation": {
          "type": "string",
          "enum": ["DIRECT", "FORMAT", "TRANSFORM", "CUSTOM"],
          "description": "数据转换方式"
        },
        "validation": {
          "$ref": "#/$defs/fieldValidation"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "screenFieldId", "dtoAttributeName"],
      "additionalProperties": false
    },
    "fieldValidation": {
      "type": "object",
      "properties": {
        "isRequired": {
          "type": "boolean",
          "description": "是否必填"
        },
        "pattern": {
          "type": "string",
          "description": "正则表达式模式"
        },
        "minLength": {
          "type": "integer",
          "description": "最小长度"
        },
        "maxLength": {
          "type": "integer",
          "description": "最大长度"
        },
        "minValue": {
          "type": ["number", "string"],
          "description": "最小值"
        },
        "maxValue": {
          "type": ["number", "string"],
          "description": "最大值"
        },
        "customValidation": {
          "type": "string",
          "description": "自定义验证表达式"
        }
      },
      "additionalProperties": false
    },
    "apiMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^api_mapping_[a-zA-Z0-9_]+$",
          "description": "API映射ID"
        },
        "name": {
          "type": "string",
          "description": "API映射名称"
        },
        "description": {
          "type": "string",
          "description": "API映射描述"
        },
        "endpointId": {
          "type": "string",
          "pattern": "^endpoint_[a-zA-Z0-9_]+$",
          "description": "端点ID"
        },
        "requestDtoId": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "请求DTO ID"
        },
        "responseDtoId": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "响应DTO ID"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "endpointId"],
      "additionalProperties": false
    },
    "eventMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^event_mapping_[a-zA-Z0-9_]+$",
          "description": "事件映射ID"
        },
        "name": {
          "type": "string",
          "description": "事件映射名称"
        },
        "description": {
          "type": "string",
          "description": "事件映射描述"
        },
        "eventId": {
          "type": "string",
          "pattern": "^event_[a-zA-Z0-9_]+$",
          "description": "事件ID"
        },
        "publisher": {
          "type": "string",
          "description": "发布者"
        },
        "subscribers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "订阅者列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "eventId"],
      "additionalProperties": false
    },
    "securityMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^security_mapping_[a-zA-Z0-9_]+$",
          "description": "安全映射ID"
        },
        "name": {
          "type": "string",
          "description": "安全映射名称"
        },
        "description": {
          "type": "string",
          "description": "安全映射描述"
        },
        "type": {
          "type": "string",
          "enum": ["AUTHENTICATION", "AUTHORIZATION", "ENCRYPTION", "AUDIT"],
          "description": "安全类型"
        },
        "config": {
          "type": "object",
          "description": "安全配置"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    },
    "monitoringMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^monitoring_mapping_[a-zA-Z0-9_]+$",
          "description": "监控映射ID"
        },
        "name": {
          "type": "string",
          "description": "监控映射名称"
        },
        "description": {
          "type": "string",
          "description": "监控映射描述"
        },
        "type": {
          "type": "string",
          "enum": ["METRICS", "LOGGING", "TRACING", "HEALTH_CHECK"],
          "description": "监控类型"
        },
        "config": {
          "type": "object",
          "description": "监控配置"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "type"],
      "additionalProperties": false
    }
  }
}