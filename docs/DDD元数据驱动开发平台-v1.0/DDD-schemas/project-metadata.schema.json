{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DDD元数据驱动开发平台 - 项目元数据Schema",
  "description": "定义DDD项目的元数据信息，包括项目基本信息、配置、统计等",
  "type": "object",
  "version": "2.0.0",
  "properties": {
    "version": {
      "type": "string",
      "description": "Schema版本号",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "examples": ["2.0.0"]
    },
    "projectId": {
      "type": "string",
      "description": "项目唯一标识符",
      "pattern": "^[a-zA-Z0-9_-]+$",
      "minLength": 1,
      "maxLength": 50
    },
    "projectInfo": {
      "type": "object",
      "description": "项目基本信息",
      "properties": {
        "name": {
          "type": "string",
          "description": "项目名称",
          "minLength": 1,
          "maxLength": 100
        },
        "englishName": {
          "type": "string",
          "description": "项目英文名称",
          "pattern": "^[a-zA-Z0-9_\\s]+$",
          "maxLength": 100
        },
        "description": {
          "type": "string",
          "description": "项目描述",
          "maxLength": 500
        },
        "version": {
          "type": "string",
          "description": "项目版本号",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "status": {
          "type": "string",
          "enum": ["DRAFT", "IN_PROGRESS", "REVIEW", "APPROVED", "DEPLOYED", "ARCHIVED"],
          "description": "项目状态"
        },
        "priority": {
          "type": "string",
          "enum": ["LOW", "MEDIUM", "HIGH", "CRITICAL"],
          "description": "项目优先级"
        },
        "startDate": {
          "type": "string",
          "format": "date",
          "description": "项目开始日期"
        },
        "endDate": {
          "type": "string",
          "format": "date",
          "description": "项目结束日期"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 50
          },
          "description": "项目标签",
          "maxItems": 10
        }
      },
      "required": ["name", "status", "priority"],
      "additionalProperties": false
    },
    "teamInfo": {
      "type": "object",
      "description": "团队信息",
      "properties": {
        "productOwner": {
          "type": "object",
          "description": "产品负责人",
          "properties": {
            "name": {
              "type": "string",
              "description": "姓名",
              "minLength": 1,
              "maxLength": 50
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱"
            },
            "phone": {
              "type": "string",
              "description": "电话",
              "pattern": "^[+]?[0-9\\s-()]+$"
            }
          },
          "required": ["name", "email"],
          "additionalProperties": false
        },
        "technicalLead": {
          "type": "object",
          "description": "技术负责人",
          "properties": {
            "name": {
              "type": "string",
              "description": "姓名",
              "minLength": 1,
              "maxLength": 50
            },
            "email": {
              "type": "string",
              "format": "email",
              "description": "邮箱"
            },
            "phone": {
              "type": "string",
              "description": "电话",
              "pattern": "^[+]?[0-9\\s-()]+$"
            }
          },
          "required": ["name", "email"],
          "additionalProperties": false
        },
        "teamMembers": {
          "type": "array",
          "description": "团队成员",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "姓名",
                "minLength": 1,
                "maxLength": 50
              },
              "email": {
                "type": "string",
                "format": "email",
                "description": "邮箱"
              },
              "role": {
                "type": "string",
                "enum": ["DEVELOPER", "TESTER", "DESIGNER", "ANALYST", "ARCHITECT", "DEVOPS"],
                "description": "角色"
              },
              "skills": {
                "type": "array",
                "items": {
                  "type": "string",
                  "maxLength": 30
                },
                "description": "技能",
                "maxItems": 10
              }
            },
            "required": ["name", "email", "role"],
            "additionalProperties": false
          },
          "maxItems": 20
        }
      },
      "additionalProperties": false
    },
    "technicalStack": {
      "type": "object",
      "description": "技术栈信息",
      "properties": {
        "frontend": {
          "type": "object",
          "description": "前端技术栈",
          "properties": {
            "framework": {
              "type": "string",
              "description": "前端框架",
              "enum": ["REACT", "VUE", "ANGULAR", "SVELTE", "SOLID", "OTHER"]
            },
            "uiLibrary": {
              "type": "string",
              "description": "UI库",
              "examples": ["Ant Design", "Element UI", "Material-UI", "Tailwind CSS", "amis"]
            },
            "language": {
              "type": "string",
              "description": "编程语言",
              "enum": ["JAVASCRIPT", "TYPESCRIPT", "OTHER"]
            },
            "buildTool": {
              "type": "string",
              "description": "构建工具",
              "enum": ["VITE", "WEBPACK", "ROLLUP", "ESBUILD", "OTHER"]
            }
          },
          "additionalProperties": false
        },
        "backend": {
          "type": "object",
          "description": "后端技术栈",
          "properties": {
            "framework": {
              "type": "string",
              "description": "后端框架",
              "enum": ["SPRING_BOOT", "EXPRESS", "FASTAPI", "ASP_NET", "LARAVEL", "OTHER"]
            },
            "language": {
              "type": "string",
              "description": "编程语言",
              "enum": ["JAVA", "JAVASCRIPT", "PYTHON", "C_SHARP", "PHP", "GO", "RUST", "OTHER"]
            },
            "database": {
              "type": "string",
              "description": "数据库",
              "enum": ["MYSQL", "POSTGRESQL", "ORACLE", "SQLSERVER", "MONGODB", "REDIS", "OTHER"]
            },
            "orm": {
              "type": "string",
              "description": "ORM框架",
              "examples": ["MyBatis", "JPA", "Sequelize", "SQLAlchemy", "Entity Framework"]
            }
          },
          "additionalProperties": false
        },
        "infrastructure": {
          "type": "object",
          "description": "基础设施",
          "properties": {
            "deployment": {
              "type": "string",
              "description": "部署方式",
              "enum": ["DOCKER", "KUBERNETES", "CLOUD", "TRADITIONAL", "OTHER"]
            },
            "cloud": {
              "type": "string",
              "description": "云平台",
              "enum": ["AWS", "AZURE", "GCP", "ALIYUN", "TENCENT", "OTHER"]
            },
            "monitoring": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["PROMETHEUS", "GRAFANA", "ELASTICSEARCH", "LOGSTASH", "KIBANA", "OTHER"]
              },
              "description": "监控工具"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "businessContext": {
      "type": "object",
      "description": "业务上下文",
      "properties": {
        "industry": {
          "type": "string",
          "description": "所属行业",
          "enum": ["E_COMMERCE", "FINANCE", "HEALTHCARE", "EDUCATION", "MANUFACTURING", "LOGISTICS", "ENTERTAINMENT", "GOVERNMENT", "OTHER"]
        },
        "businessType": {
          "type": "string",
          "description": "业务类型",
          "enum": ["B2B", "B2C", "B2B2C", "C2C", "INTERNAL", "OTHER"]
        },
        "targetUsers": {
          "type": "array",
          "items": {
            "type": "string",
            "maxLength": 50
          },
          "description": "目标用户群体",
          "maxItems": 10
        },
        "businessGoals": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "goal": {
                "type": "string",
                "description": "业务目标",
                "minLength": 1,
                "maxLength": 200
              },
              "priority": {
                "type": "string",
                "enum": ["LOW", "MEDIUM", "HIGH", "CRITICAL"],
                "description": "优先级"
              },
              "metrics": {
                "type": "array",
                "items": {
                  "type": "string",
                  "maxLength": 100
                },
                "description": "相关指标"
              }
            },
            "required": ["goal", "priority"],
            "additionalProperties": false
          },
          "description": "业务目标",
          "maxItems": 10
        }
      },
      "additionalProperties": false
    },
    "configuration": {
      "type": "object",
      "description": "项目配置",
      "properties": {
        "dddSettings": {
          "type": "object",
          "description": "DDD设置",
          "properties": {
            "enableValidation": {
              "type": "boolean",
              "description": "是否启用验证",
              "default": true
            },
            "strictMode": {
              "type": "boolean",
              "description": "严格模式",
              "default": false
            },
            "autoDiscovery": {
              "type": "boolean",
              "description": "自动发现引用关系",
              "default": true
            },
            "namingConvention": {
              "type": "string",
              "enum": ["CAMEL_CASE", "SNAKE_CASE", "PASCAL_CASE", "KEBAB_CASE"],
              "description": "命名规范",
              "default": "CAMEL_CASE"
            }
          },
          "additionalProperties": false
        },
        "codeGeneration": {
          "type": "object",
          "description": "代码生成配置",
          "properties": {
            "enableAutoGeneration": {
              "type": "boolean",
              "description": "启用自动代码生成",
              "default": true
            },
            "targetLanguage": {
              "type": "string",
              "enum": ["JAVA", "TYPESCRIPT", "PYTHON", "C_SHARP"],
              "description": "目标语言"
            },
            "framework": {
              "type": "string",
              "description": "目标框架"
            },
            "outputPath": {
              "type": "string",
              "description": "输出路径"
            },
            "templateEngine": {
              "type": "string",
              "enum": ["VELOCITY", "FREEMARKER", "THYMELEAF", "HANDLEBARS"],
              "description": "模板引擎"
            }
          },
          "additionalProperties": false
        },
        "uiSettings": {
          "type": "object",
          "description": "UI设置",
          "properties": {
            "theme": {
              "type": "string",
              "enum": ["LIGHT", "DARK", "AUTO"],
              "description": "主题",
              "default": "LIGHT"
            },
            "language": {
              "type": "string",
              "enum": ["ZH_CN", "EN_US", "JA_JP"],
              "description": "界面语言",
              "default": "ZH_CN"
            },
            "layout": {
              "type": "string",
              "enum": ["SIDEBAR", "TOP_NAV", "COMPACT"],
              "description": "布局方式",
              "default": "SIDEBAR"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "statistics": {
      "type": "object",
      "description": "项目统计信息（系统自动维护）",
      "properties": {
        "lastUpdated": {
          "type": "string",
          "format": "date-time",
          "description": "最后更新时间"
        },
        "elementCounts": {
          "type": "object",
          "description": "元素数量统计",
          "properties": {
            "businessTerms": {
              "type": "integer",
              "minimum": 0,
              "description": "业务术语数量"
            },
            "boundedContexts": {
              "type": "integer",
              "minimum": 0,
              "description": "限界上下文数量"
            },
            "aggregates": {
              "type": "integer",
              "minimum": 0,
              "description": "聚合数量"
            },
            "entities": {
              "type": "integer",
              "minimum": 0,
              "description": "实体数量"
            },
            "valueObjects": {
              "type": "integer",
              "minimum": 0,
              "description": "值对象数量"
            },
            "domainServices": {
              "type": "integer",
              "minimum": 0,
              "description": "领域服务数量"
            },
            "dataTransferObjects": {
              "type": "integer",
              "minimum": 0,
              "description": "DTO数量"
            },
            "screenDefinitions": {
              "type": "integer",
              "minimum": 0,
              "description": "屏幕定义数量"
            }
          },
          "additionalProperties": false
        },
        "usageStatus": {
          "type": "object",
          "description": "使用状态统计",
          "properties": {
            "usedElements": {
              "type": "integer",
              "minimum": 0,
              "description": "已使用元素数量"
            },
            "unusedElements": {
              "type": "integer",
              "minimum": 0,
              "description": "未使用元素数量"
            },
            "orphanedReferences": {
              "type": "integer",
              "minimum": 0,
              "description": "孤立引用数量"
            }
          },
          "additionalProperties": false
        },
        "completionRate": {
          "type": "object",
          "description": "完成度统计",
          "properties": {
            "ubiquitousLanguage": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "统一语言完成度"
            },
            "strategicDesign": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "战略设计完成度"
            },
            "tacticalDesign": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "战术设计完成度"
            },
            "dataTransferObjects": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "DTO完成度"
            },
            "implementationMapping": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "实现映射完成度"
            },
            "screenDefinition": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "屏幕定义完成度"
            },
            "overall": {
              "type": "number",
              "minimum": 0,
              "maximum": 100,
              "description": "整体完成度"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "description": "元数据信息",
      "properties": {
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "创建时间"
        },
        "createdBy": {
          "type": "string",
          "description": "创建者"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "更新时间"
        },
        "updatedBy": {
          "type": "string",
          "description": "更新者"
        },
        "version": {
          "type": "string",
          "description": "数据版本"
        },
        "checksum": {
          "type": "string",
          "description": "数据校验和"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["version", "projectId", "projectInfo"],
  "additionalProperties": false,
  "$defs": {
    "Constraints": {
      "type": "object",
      "description": "约束条件",
      "properties": {
        "minLength": {
          "type": "integer",
          "minimum": 0,
          "description": "最小长度"
        },
        "maxLength": {
          "type": "integer",
          "minimum": 0,
          "description": "最大长度"
        },
        "minValue": {
          "type": "number",
          "description": "最小值"
        },
        "maxValue": {
          "type": "number",
          "description": "最大值"
        },
        "pattern": {
          "type": "string",
          "description": "正则表达式模式"
        },
        "enum": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "枚举值"
        }
      },
      "additionalProperties": false
    },
    "ValidationRule": {
      "type": "object",
      "description": "验证规则",
      "properties": {
        "name": {
          "type": "string",
          "description": "规则名称"
        },
        "type": {
          "type": "string",
          "enum": ["REQUIRED", "LENGTH", "RANGE", "PATTERN", "CUSTOM"],
          "description": "规则类型"
        },
        "message": {
          "type": "string",
          "description": "错误消息"
        },
        "parameters": {
          "type": "object",
          "description": "规则参数"
        }
      },
      "required": ["name", "type", "message"],
      "additionalProperties": false
    },
    "Serialization": {
      "type": "object",
      "description": "序列化配置",
      "properties": {
        "format": {
          "type": "string",
          "enum": ["JSON", "XML", "PROTOBUF", "AVRO"],
          "description": "序列化格式"
        },
        "includeNulls": {
          "type": "boolean",
          "description": "是否包含空值"
        },
        "dateFormat": {
          "type": "string",
          "description": "日期格式"
        },
        "namingStrategy": {
          "type": "string",
          "enum": ["CAMEL_CASE", "SNAKE_CASE", "PASCAL_CASE"],
          "description": "命名策略"
        }
      },
      "additionalProperties": false
    }
  }
}
