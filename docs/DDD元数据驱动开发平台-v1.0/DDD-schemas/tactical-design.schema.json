{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/ddd-metamodel/1.0/tactical-design.schema.json",
  "title": "战术设计定义",
  "description": "领域驱动设计战术设计定义 - 重构版 v2.0",
  "version": "2.0.0",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "模式版本",
      "const": "2.0.0"
    },
    "boundedContextId": {
      "type": "string",
      "pattern": "^bc_[a-zA-Z0-9_]+$",
      "description": "所属限界上下文ID（可选，在战略设计完成后必填）"
    },
    "aggregates": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/aggregate"
      },
      "description": "聚合列表"
    },
    "entities": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/entity"
      },
      "description": "实体列表"
    },
    "valueObjects": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/valueObject"
      },
      "description": "值对象列表"
    },
    "domainServices": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/domainService"
      },
      "description": "领域服务列表"
    },
    "repositories": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/repository"
      },
      "description": "仓储列表"
    },
    "factories": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/factory"
      },
      "description": "工厂列表"
    },
    "domainEvents": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/domainEvent"
      },
      "description": "领域事件列表"
    },
    "enums": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/enumDefinition"
      },
      "description": "枚举列表"
    },
    "antiCorruptionLayers": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/antiCorruptionLayer"
      },
      "description": "防腐层列表（Anti-Corruption Layer）"
    },
    "validationStage": {
      "type": "string",
      "enum": ["DRAFT", "STRATEGIC_COMPLETE", "AGGREGATE_DEFINED", "COMPLETE"],
      "description": "验证阶段：DRAFT(草稿)、STRATEGIC_COMPLETE(战略设计完成)、AGGREGATE_DEFINED(聚合已定义)、COMPLETE(完整)"
    },
    "validationRules": {
      "type": "object",
      "properties": {
        "requireBoundedContextId": {
          "type": "boolean",
          "description": "是否要求boundedContextId（在STRATEGIC_COMPLETE阶段后为true）"
        },
        "requireTermReferences": {
          "type": "boolean",
          "description": "是否要求术语引用（在STRATEGIC_COMPLETE阶段后为true）"
        },
        "requireAttributeReferences": {
          "type": "boolean",
          "description": "是否要求属性引用（在AGGREGATE_DEFINED阶段后为true）"
        },
        "crossReferenceValidation": {
          "type": "boolean",
          "description": "是否启用跨Schema引用验证"
        }
      },
      "additionalProperties": false
    }
  },
  "required": ["version"],
  "additionalProperties": false,
  "$defs": {
    "aggregate": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^agg_[a-zA-Z0-9_]+$",
          "description": "聚合唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "聚合名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "聚合详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "rootEntityId": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "聚合根实体ID"
        },
        "invariants": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/invariant"
          },
          "description": "不变约束列表"
        },
        "entityIds": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^entity_[a-zA-Z0-9_]+$"
          },
          "description": "实体ID列表"
        },
        "valueObjectIds": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^vo_[a-zA-Z0-9_]+$"
          },
          "description": "值对象ID列表"
        },
        "businessRules": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^rule_[a-zA-Z0-9_]+$"
          },
          "description": "相关业务规则ID列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId", "rootEntityId"],
      "additionalProperties": false
    },
    "entity": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "实体唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "实体名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "实体详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "aggregateId": {
          "type": "string",
          "pattern": "^agg_[a-zA-Z0-9_]+$",
          "description": "所属聚合ID"
        },
        "isRoot": {
          "type": "boolean",
          "description": "是否为聚合根"
        },
        "identity": {
          "$ref": "#/$defs/identity"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/entityAttribute"
          },
          "description": "属性列表"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/method"
          },
          "description": "方法列表"
        },
        "lifecycle": {
          "$ref": "#/$defs/lifecycle"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId"],
      "additionalProperties": false
    },
    "entityAttribute": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "属性唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "属性名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "属性详细描述"
        },
        "businessAttributeId": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "引用的业务属性ID"
        },
        "isIdentity": {
          "type": "boolean",
          "description": "是否为标识属性"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必填"
        },
        "isReadOnly": {
          "type": "boolean",
          "description": "是否只读"
        },
        "defaultValue": {
          "description": "默认值"
        },
        "validationRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "验证规则列表"
        },
        "businessLogic": {
          "type": "string",
          "description": "业务逻辑描述"
        }
      },
      "required": ["id", "name", "description", "businessAttributeId"],
      "additionalProperties": false
    },
    "valueObject": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^vo_[a-zA-Z0-9_]+$",
          "description": "值对象唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "值对象名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "值对象详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "isImmutable": {
          "type": "boolean",
          "description": "是否不可变"
        },
        "attributes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/valueObjectAttribute"
          },
          "description": "属性列表"
        },
        "equalityLogic": {
          "type": "string",
          "description": "相等性判断逻辑描述"
        },
        "validationRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "验证规则列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId", "isImmutable"],
      "additionalProperties": false
    },
    "valueObjectAttribute": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "属性唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "属性名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "属性详细描述"
        },
        "businessAttributeId": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "引用的业务属性ID"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必填"
        },
        "defaultValue": {
          "description": "默认值"
        },
        "validationRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "验证规则列表"
        }
      },
      "required": ["id", "name", "description", "businessAttributeId"],
      "additionalProperties": false
    },
    "domainService": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^service_[a-zA-Z0-9_]+$",
          "description": "领域服务唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "领域服务名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "领域服务详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/method"
          },
          "description": "方法列表"
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "依赖列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId"],
      "additionalProperties": false
    },
    "method": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^method_[a-zA-Z0-9_]+$",
          "description": "方法唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "方法名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "方法详细描述"
        },
        "visibility": {
          "type": "string",
          "enum": ["PUBLIC", "PROTECTED", "PRIVATE"],
          "description": "可见性"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/parameter"
          },
          "description": "参数列表"
        },
        "returnType": {
          "$ref": "#/$defs/methodReturnType"
        },
        "businessLogic": {
          "type": "string",
          "description": "业务逻辑描述"
        },
        "preconditions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "前置条件列表"
        },
        "postconditions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "后置条件列表"
        },
        "exceptions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "异常列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description"],
      "additionalProperties": false
    },
    "parameter": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^param_[a-zA-Z0-9_]+$",
          "description": "参数唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "参数名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "参数描述"
        },
        "businessAttributeId": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "引用的业务属性ID"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必需"
        },
        "defaultValue": {
          "description": "默认值"
        },
        "validationRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "验证规则列表"
        }
      },
      "required": ["id", "name", "description"],
      "additionalProperties": false
    },
    "repository": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^repo_[a-zA-Z0-9_]+$",
          "description": "仓储唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "仓储名称",
          "minLength": 1
        },
        "programmingName": {
          "type": "string",
          "description": "编程名称",
          "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
        },
        "description": {
          "type": "string",
          "description": "仓储详细描述"
        },
        "aggregateId": {
          "type": "string",
          "pattern": "^agg_[a-zA-Z0-9_]+$",
          "description": "管理的聚合ID"
        },
        "interfaceName": {
          "type": "string",
          "description": "接口名称"
        },
        "implementationName": {
          "type": "string",
          "description": "实现类名称"
        },
        "factoryId": {
          "type": "string",
          "pattern": "^factory_[a-zA-Z0-9_]+$",
          "description": "关联的工厂ID（用于复杂对象重建）"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/method"
          },
          "description": "方法列表"
        },
        "persistenceStrategy": {
          "type": "string",
          "enum": ["JPA", "MYBATIS", "JDBC", "NOSQL", "CUSTOM"],
          "description": "持久化策略"
        },
        "queryOptimization": {
          "type": "string",
          "enum": ["NONE", "INDEX", "CACHE", "PAGINATION", "PROJECTION"],
          "description": "查询优化策略"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        },
        "usageStatus": {
          "$ref": "#/$defs/usageStatus"
        }
      },
      "required": ["id", "name", "programmingName", "description", "aggregateId"],
      "additionalProperties": false
    },
    "factory": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^factory_[a-zA-Z0-9_]+$",
          "description": "工厂唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "工厂名称",
          "minLength": 1
        },
        "programmingName": {
          "type": "string",
          "description": "编程名称",
          "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
        },
        "description": {
          "type": "string",
          "description": "工厂详细描述"
        },
        "aggregateId": {
          "type": "string",
          "pattern": "^agg_[a-zA-Z0-9_]+$",
          "description": "所属聚合ID"
        },
        "targetEntityId": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "目标实体ID"
        },
        "factoryType": {
          "type": "string",
          "enum": ["SIMPLE", "COMPLEX", "ABSTRACT", "SPECIALIZED"],
          "description": "工厂类型"
        },
        "creationStrategy": {
          "type": "string",
          "enum": ["NEW", "BUILDER", "PROTOTYPE", "SINGLETON", "POOL"],
          "description": "创建策略"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/method"
          },
          "description": "方法列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        },
        "usageStatus": {
          "$ref": "#/$defs/usageStatus"
        }
      },
      "required": ["id", "name", "programmingName", "description", "aggregateId", "targetEntityId"],
      "additionalProperties": false
    },
    "domainEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^event_[a-zA-Z0-9_]+$",
          "description": "领域事件唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "领域事件名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "领域事件详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "sourceEntityId": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "源实体ID"
        },
        "properties": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/eventProperty"
          },
          "description": "事件属性列表"
        },
        "subscribers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/eventSubscriber"
          },
          "description": "订阅者列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId"],
      "additionalProperties": false
    },
    "eventProperty": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^prop_[a-zA-Z0-9_]+$",
          "description": "属性唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "属性名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "属性描述"
        },
        "businessAttributeId": {
          "type": "string",
          "pattern": "^attr_[a-zA-Z0-9_]+$",
          "description": "引用的业务属性ID"
        },
        "isRequired": {
          "type": "boolean",
          "description": "是否必需"
        }
      },
      "required": ["id", "name", "description", "businessAttributeId"],
      "additionalProperties": false
    },
    "eventSubscriber": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^sub_[a-zA-Z0-9_]+$",
          "description": "订阅者唯一标识符"
        },
        "contextId": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "订阅者上下文ID"
        },
        "handlerName": {
          "type": "string",
          "description": "事件处理器名称"
        },
        "description": {
          "type": "string",
          "description": "订阅处理描述"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "contextId", "handlerName"],
      "additionalProperties": false
    },
    "enumDefinition": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^enum_[a-zA-Z0-9_]+$",
          "description": "枚举唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "枚举名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "枚举详细描述"
        },
        "termId": {
          "type": "string",
          "pattern": "^term_[a-zA-Z0-9_]+$",
          "description": "对应术语ID引用"
        },
        "values": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/enumValue"
          },
          "description": "枚举值列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "termId"],
      "additionalProperties": false
    },
    "enumValue": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^ev_[a-zA-Z0-9_]+$",
          "description": "枚举值唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "枚举值名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "枚举值描述"
        },
        "value": {
          "type": ["string", "number"],
          "description": "枚举值"
        },
        "isDefault": {
          "type": "boolean",
          "description": "是否为默认值"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "value"],
      "additionalProperties": false
    },
    "identity": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["SINGLE", "COMPOSITE", "GENERATED"],
          "description": "标识类型"
        },
        "attributes": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^attr_[a-zA-Z0-9_]+$"
          },
          "description": "标识属性ID列表"
        },
        "generationStrategy": {
          "type": "string",
          "enum": ["UUID", "SEQUENCE", "CUSTOM"],
          "description": "生成策略"
        },
        "customGenerator": {
          "type": "string",
          "description": "自定义生成器"
        }
      },
      "required": ["type"],
      "additionalProperties": false
    },
    "lifecycle": {
      "type": "object",
      "properties": {
        "states": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "生命周期状态列表"
        },
        "transitions": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/transition"
          },
          "description": "状态转换列表"
        },
        "initialState": {
          "type": "string",
          "description": "初始状态"
        },
        "finalStates": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "最终状态列表"
        }
      },
      "additionalProperties": false
    },
    "transition": {
      "type": "object",
      "properties": {
        "from": {
          "type": "string",
          "description": "源状态"
        },
        "to": {
          "type": "string",
          "description": "目标状态"
        },
        "trigger": {
          "type": "string",
          "description": "触发条件"
        },
        "guard": {
          "type": "string",
          "description": "守卫条件"
        },
        "action": {
          "type": "string",
          "description": "执行动作"
        }
      },
      "required": ["from", "to", "trigger"],
      "additionalProperties": false
    },
    "methodReturnType": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["PRIMITIVE", "DTO", "ENTITY", "VALUE_OBJECT", "COLLECTION", "GENERIC", "VOID"],
          "description": "返回类型分类"
        },
        "primitiveType": {
          "type": "string",
          "enum": ["STRING", "INTEGER", "LONG", "DOUBLE", "BOOLEAN", "DATE", "DATETIME", "DECIMAL", "UUID"],
          "description": "基本数据类型"
        },
        "dtoId": {
          "type": "string",
          "pattern": "^dto_[a-zA-Z0-9_]+$",
          "description": "引用的DTO ID"
        },
        "entityId": {
          "type": "string",
          "pattern": "^entity_[a-zA-Z0-9_]+$",
          "description": "引用的实体ID"
        },
        "valueObjectId": {
          "type": "string",
          "pattern": "^vo_[a-zA-Z0-9_]+$",
          "description": "引用的值对象ID"
        },
        "collectionType": {
          "type": "string",
          "enum": ["LIST", "SET", "MAP", "ARRAY"],
          "description": "集合类型"
        },
        "collectionElementType": {
          "$ref": "#/$defs/methodReturnType",
          "description": "集合元素类型"
        },
        "genericTypes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/methodReturnType"
          },
          "description": "泛型类型参数列表"
        },
        "customType": {
          "type": "string",
          "description": "自定义类型名称"
        },
        "description": {
          "type": "string",
          "description": "返回类型描述"
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "示例值列表"
        }
      },
      "required": ["type"],
      "additionalProperties": false
    },
    "antiCorruptionLayer": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^acl_[a-zA-Z0-9_]+$",
          "description": "防腐层唯一标识符（Anti-Corruption Layer）"
        },
        "name": {
          "type": "string",
          "description": "防腐层名称（Anti-Corruption Layer）",
          "minLength": 1
        },
        "programmingName": {
          "type": "string",
          "description": "编程名称",
          "pattern": "^[a-zA-Z][a-zA-Z0-9_]*$"
        },
        "description": {
          "type": "string",
          "description": "防腐层详细描述（Anti-Corruption Layer）"
        },
        "externalSystemId": {
          "type": "string",
          "pattern": "^sys_[a-zA-Z0-9_]+$",
          "description": "外部系统ID"
        },
        "externalSystemName": {
          "type": "string",
          "description": "外部系统名称"
        },
        "externalSystemType": {
          "type": "string",
          "enum": ["LEGACY", "THIRD_PARTY", "MICROSERVICE", "DATABASE", "API", "FILE_SYSTEM"],
          "description": "外部系统类型"
        },
        "translationLayer": {
          "type": "object",
          "properties": {
            "inputTranslator": {
              "type": "string",
              "description": "输入转换器类名"
            },
            "outputTranslator": {
              "type": "string",
              "description": "输出转换器类名"
            },
            "dataMapper": {
              "type": "string",
              "description": "数据映射器类名"
            }
          },
          "description": "转换层配置"
        },
        "adapters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/adapter"
          },
          "description": "适配器列表"
        },
        "facades": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/facade"
          },
          "description": "外观模式列表"
        },
        "isolationLevel": {
          "type": "string",
          "enum": ["LOW", "MEDIUM", "HIGH", "COMPLETE"],
          "description": "隔离级别"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        },
        "usageStatus": {
          "$ref": "#/$defs/usageStatus"
        }
      },
      "required": ["id", "name", "programmingName", "description", "externalSystemId", "externalSystemName"],
      "additionalProperties": false
    },
    "adapter": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^adapter_[a-zA-Z0-9_]+$",
          "description": "适配器唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "适配器名称"
        },
        "description": {
          "type": "string",
          "description": "适配器描述"
        },
        "adapterType": {
          "type": "string",
          "enum": ["INPUT", "OUTPUT", "BIDIRECTIONAL"],
          "description": "适配器类型"
        },
        "sourceFormat": {
          "type": "string",
          "description": "源数据格式"
        },
        "targetFormat": {
          "type": "string",
          "description": "目标数据格式"
        },
        "transformationRules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "转换规则列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "adapterType"],
      "additionalProperties": false
    },
    "facade": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^facade_[a-zA-Z0-9_]+$",
          "description": "外观唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "外观名称"
        },
        "description": {
          "type": "string",
          "description": "外观描述"
        },
        "facadeType": {
          "type": "string",
          "enum": ["SERVICE", "DATA", "UI", "INTEGRATION"],
          "description": "外观类型"
        },
        "methods": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/method"
          },
          "description": "方法列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "facadeType"],
      "additionalProperties": false
    },
    "invariant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^inv_[a-zA-Z0-9_]+$",
          "description": "不变量唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "不变量名称"
        },
        "description": {
          "type": "string",
          "description": "不变量描述"
        },
        "expression": {
          "type": "string",
          "description": "不变量表达式"
        },
        "severity": {
          "type": "string",
          "enum": ["ERROR", "WARNING", "INFO"],
          "description": "严重程度"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "expression"],
      "additionalProperties": false
    }
  }
}