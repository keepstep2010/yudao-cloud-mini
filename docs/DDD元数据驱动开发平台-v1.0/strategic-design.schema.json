{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/ddd-metamodel/1.0/strategic-design.schema.json",
  "title": "战略设计定义",
  "description": "领域驱动设计战略设计定义 - 重构版 v2.0",
  "version": "2.0.0",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "description": "模式版本",
      "const": "2.0.0"
    },
    "domainId": {
      "type": "string",
      "pattern": "^domain_[a-zA-Z0-9_]+$",
      "description": "所属领域ID"
    },
    "boundedContexts": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/boundedContext"
      },
      "minItems": 1,
      "description": "限界上下文列表"
    },
    "contextMappings": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/contextMapping"
      },
      "description": "上下文映射列表"
    },
    "subdomains": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/subdomain"
      },
      "description": "子域列表"
    },
    "domainEvents": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/domainEvent"
      },
      "description": "领域事件列表"
    }
  },
  "required": ["version", "domainId", "boundedContexts"],
  "additionalProperties": false,
  "$defs": {
    "boundedContext": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "限界上下文唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "上下文名称",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "description": "上下文详细描述"
        },
        "subdomainId": {
          "type": "string",
          "pattern": "^subdomain_[a-zA-Z0-9_]+$",
          "description": "所属子域ID"
        },
        "type": {
          "type": "string",
          "enum": ["CORE", "SUPPORTING", "GENERIC"],
          "description": "上下文类型"
        },
        "ubiquitousLanguage": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^term_[a-zA-Z0-9_]+$"
          },
          "description": "通用语言术语ID列表"
        },
        "businessCapabilities": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/businessCapability"
          },
          "description": "业务能力列表"
        },
        "team": {
          "$ref": "#/$defs/team"
        },
        "technologyStack": {
          "$ref": "#/$defs/technologyStack"
        },
        "deployment": {
          "$ref": "#/$defs/deployment"
        },
        "metrics": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/metric"
          },
          "description": "关键指标列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "创建时间"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "更新时间"
        }
      },
      "required": ["id", "name", "description", "type"],
      "additionalProperties": false
    },
    "businessCapability": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^cap_[a-zA-Z0-9_]+$",
          "description": "业务能力唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "能力名称"
        },
        "description": {
          "type": "string",
          "description": "能力描述"
        },
        "category": {
          "type": "string",
          "enum": ["CORE", "SUPPORTING", "ENABLING"],
          "description": "能力分类"
        },
        "priority": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5,
          "description": "优先级（1-5，5为最高）"
        },
        "maturity": {
          "type": "string",
          "enum": ["INITIAL", "DEVELOPING", "MATURE", "OPTIMIZING"],
          "description": "成熟度"
        },
        "businessProcesses": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "相关业务流程列表"
        },
        "keyMetrics": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "关键指标列表"
        }
      },
      "required": ["id", "name", "description", "category"],
      "additionalProperties": false
    },
    "contextMapping": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^mapping_[a-zA-Z0-9_]+$",
          "description": "映射唯一标识符"
        },
        "sourceContextId": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "源上下文ID"
        },
        "targetContextId": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "目标上下文ID"
        },
        "pattern": {
          "type": "string",
          "enum": ["SHARED_KERNEL", "CUSTOMER_SUPPLIER", "CONFORMIST", "ANTI_CORRUPTION_LAYER", "OPEN_HOST_SERVICE", "PUBLISHED_LANGUAGE", "SEPARATE_WAYS", "BIG_BALL_OF_MUD"],
          "description": "战略模式"
        },
        "description": {
          "type": "string",
          "description": "映射描述"
        },
        "contracts": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/contract"
          },
          "description": "契约列表"
        },
        "integrationPoints": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/integrationPoint"
          },
          "description": "集成点列表"
        },
        "dataFlow": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/dataFlow"
          },
          "description": "数据流列表"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "创建时间"
        }
      },
      "required": ["id", "sourceContextId", "targetContextId", "pattern"],
      "additionalProperties": false
    },
    "contract": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^contract_[a-zA-Z0-9_]+$",
          "description": "契约唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "契约名称"
        },
        "description": {
          "type": "string",
          "description": "契约描述"
        },
        "type": {
          "type": "string",
          "enum": ["API", "EVENT", "DATA", "PROTOCOL"],
          "description": "契约类型"
        },
        "version": {
          "type": "string",
          "description": "契约版本"
        },
        "specification": {
          "type": "object",
          "description": "契约规范"
        },
        "sla": {
          "$ref": "#/$defs/sla"
        },
        "isDeprecated": {
          "type": "boolean",
          "description": "是否已废弃"
        }
      },
      "required": ["id", "name", "description", "type"],
      "additionalProperties": false
    },
    "integrationPoint": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^ip_[a-zA-Z0-9_]+$",
          "description": "集成点唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "集成点名称"
        },
        "description": {
          "type": "string",
          "description": "集成点描述"
        },
        "type": {
          "type": "string",
          "enum": ["REST_API", "RPC", "MESSAGE_QUEUE", "FILE_TRANSFER", "DATABASE"],
          "description": "集成类型"
        },
        "endpoint": {
          "type": "string",
          "description": "端点地址"
        },
        "protocol": {
          "type": "string",
          "description": "协议"
        },
        "authentication": {
          "type": "string",
          "description": "认证方式"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "type"],
      "additionalProperties": false
    },
    "dataFlow": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^flow_[a-zA-Z0-9_]+$",
          "description": "数据流唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "数据流名称"
        },
        "description": {
          "type": "string",
          "description": "数据流描述"
        },
        "direction": {
          "type": "string",
          "enum": ["INBOUND", "OUTBOUND", "BIDIRECTIONAL"],
          "description": "数据流向"
        },
        "dataType": {
          "type": "string",
          "description": "数据类型"
        },
        "frequency": {
          "type": "string",
          "enum": ["REAL_TIME", "NEAR_REAL_TIME", "BATCH", "ON_DEMAND"],
          "description": "频率"
        },
        "volume": {
          "type": "string",
          "description": "数据量"
        },
        "isEncrypted": {
          "type": "boolean",
          "description": "是否加密"
        }
      },
      "required": ["id", "name", "description", "direction"],
      "additionalProperties": false
    },
    "subdomain": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^subdomain_[a-zA-Z0-9_]+$",
          "description": "子域唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "子域名称"
        },
        "description": {
          "type": "string",
          "description": "子域描述"
        },
        "type": {
          "type": "string",
          "enum": ["CORE", "SUPPORTING", "GENERIC"],
          "description": "子域类型"
        },
        "priority": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5,
          "description": "优先级"
        },
        "businessObjectives": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "业务目标列表"
        },
        "keyStakeholders": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "关键干系人列表"
        }
      },
      "required": ["id", "name", "description", "type"],
      "additionalProperties": false
    },
    "domainEvent": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^event_[a-zA-Z0-9_]+$",
          "description": "事件唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "事件名称"
        },
        "description": {
          "type": "string",
          "description": "事件描述"
        },
        "sourceContextId": {
          "type": "string",
          "pattern": "^bc_[a-zA-Z0-9_]+$",
          "description": "源上下文ID"
        },
        "targetContextIds": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^bc_[a-zA-Z0-9_]+$"
          },
          "description": "目标上下文ID列表"
        },
        "eventType": {
          "type": "string",
          "enum": ["DOMAIN_EVENT", "INTEGRATION_EVENT", "SYSTEM_EVENT"],
          "description": "事件类型"
        },
        "payload": {
          "type": "object",
          "description": "事件载荷"
        },
        "version": {
          "type": "string",
          "description": "事件版本"
        },
        "isPublished": {
          "type": "boolean",
          "description": "是否已发布"
        }
      },
      "required": ["id", "name", "description", "sourceContextId"],
      "additionalProperties": false
    },
    "team": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^team_[a-zA-Z0-9_]+$",
          "description": "团队唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "团队名称"
        },
        "description": {
          "type": "string",
          "description": "团队描述"
        },
        "size": {
          "type": "integer",
          "minimum": 1,
          "description": "团队规模"
        },
        "roles": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "角色列表"
        },
        "contactPerson": {
          "type": "string",
          "description": "联系人"
        },
        "contactEmail": {
          "type": "string",
          "format": "email",
          "description": "联系邮箱"
        }
      },
      "required": ["id", "name", "description"],
      "additionalProperties": false
    },
    "technologyStack": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^tech_[a-zA-Z0-9_]+$",
          "description": "技术栈唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "技术栈名称"
        },
        "description": {
          "type": "string",
          "description": "技术栈描述"
        },
        "languages": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "编程语言列表"
        },
        "frameworks": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "框架列表"
        },
        "databases": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "数据库列表"
        },
        "infrastructure": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "基础设施列表"
        },
        "version": {
          "type": "string",
          "description": "版本"
        }
      },
      "required": ["id", "name", "description"],
      "additionalProperties": false
    },
    "deployment": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^deploy_[a-zA-Z0-9_]+$",
          "description": "部署唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "部署名称"
        },
        "description": {
          "type": "string",
          "description": "部署描述"
        },
        "environment": {
          "type": "string",
          "enum": ["DEVELOPMENT", "TESTING", "STAGING", "PRODUCTION"],
          "description": "环境"
        },
        "platform": {
          "type": "string",
          "description": "平台"
        },
        "url": {
          "type": "string",
          "description": "部署URL"
        },
        "isActive": {
          "type": "boolean",
          "description": "是否激活"
        }
      },
      "required": ["id", "name", "description", "environment"],
      "additionalProperties": false
    },
    "metric": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^metric_[a-zA-Z0-9_]+$",
          "description": "指标唯一标识符"
        },
        "name": {
          "type": "string",
          "description": "指标名称"
        },
        "description": {
          "type": "string",
          "description": "指标描述"
        },
        "type": {
          "type": "string",
          "enum": ["PERFORMANCE", "BUSINESS", "TECHNICAL", "QUALITY"],
          "description": "指标类型"
        },
        "unit": {
          "type": "string",
          "description": "单位"
        },
        "target": {
          "type": "number",
          "description": "目标值"
        },
        "current": {
          "type": "number",
          "description": "当前值"
        },
        "frequency": {
          "type": "string",
          "enum": ["REAL_TIME", "HOURLY", "DAILY", "WEEKLY", "MONTHLY"],
          "description": "监控频率"
        }
      },
      "required": ["id", "name", "description", "type"],
      "additionalProperties": false
    },
    "sla": {
      "type": "object",
      "properties": {
        "responseTime": {
          "type": "number",
          "description": "响应时间（毫秒）"
        },
        "availability": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "可用性（百分比）"
        },
        "throughput": {
          "type": "number",
          "description": "吞吐量"
        },
        "errorRate": {
          "type": "number",
          "minimum": 0,
          "maximum": 100,
          "description": "错误率（百分比）"
        }
      },
      "additionalProperties": false
    }
  }
}