{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "object-jsonschemas/validation.schemas/fields/common-fields.schema.json",
  "title": "验证模块通用字段定义",
  "description": "验证管理模块的通用字段Schema定义，支持细粒度验证和部分更新",
  "type": "object",
  "$defs": {
    "id": {
      "type": "string",
      "pattern": "^validation_[a-zA-Z0-9_]+$",
      "description": "验证配置ID，格式：validation_[a-zA-Z0-9_]+"
    },
    "ruleId": {
      "type": "string",
      "pattern": "^validation_rule_[a-zA-Z0-9_]+$",
      "description": "验证规则ID，格式：validation_rule_[a-zA-Z0-9_]+"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "maxLength": 100,
      "description": "名称"
    },
    "description": {
      "type": "string",
      "maxLength": 1000,
      "description": "描述"
    },
    "isActive": {
      "type": "boolean",
      "description": "是否激活"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time",
      "description": "创建时间"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time",
      "description": "更新时间"
    },
    "scope": {
      "type": "string",
      "enum": ["GLOBAL", "DOMAIN", "SCHEMA"],
      "description": "配置范围"
    },
    "severity": {
      "type": "string",
      "enum": ["ERROR", "WARNING", "INFO"],
      "description": "严重程度"
    },
    "validationType": {
      "type": "string",
      "enum": ["CROSS_SCHEMA", "BUSINESS_RULE", "CONSISTENCY", "CUSTOM"],
      "description": "验证类型"
    },
    "expression": {
      "type": "string",
      "minLength": 1,
      "description": "验证表达式（JSONPath、JavaScript等）"
    },
    "message": {
      "type": "string",
      "minLength": 1,
      "maxLength": 500,
      "description": "验证失败消息模板"
    },
    "cronExpression": {
      "type": "string",
      "pattern": "^\\s*($|#|\\w+\\s*=|(\\?|\\*|(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?(?:,(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?)*)\\s+(\\?|\\*|(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?(?:,(?:[0-5]?\\d)(?:(?:-|\\/|\\,)(?:[0-5]?\\d))?)*)\\s+(\\?|\\*|(?:[01]?\\d|2[0-3])(?:(?:-|\\/|\\,)(?:[01]?\\d|2[0-3]))?(?:,(?:[01]?\\d|2[0-3])(?:(?:-|\\/|\\,)(?:[01]?\\d|2[0-3]))?)*)\\s+(\\?|\\*|(?:0?[1-9]|[12]\\d|3[01])(?:(?:-|\\/|\\,)(?:0?[1-9]|[12]\\d|3[01]))?(?:,(?:0?[1-9]|[12]\\d|3[01])(?:(?:-|\\/|\\,)(?:0?[1-9]|[12]\\d|3[01]))?)*)\\s+(\\?|\\*|(?:[1-9]|1[012])(?:(?:-|\\/|\\,)(?:[1-9]|1[012]))?(?:L|W)?(?:,(?:[1-9]|1[012])(?:(?:-|\\/|\\,)(?:[1-9]|1[012]))?(?:L|W)?)*|\\?|\\*|(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(?:(?:-)(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))?(?:,(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)(?:(?:-)(?:JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))?)*)\\s+(\\?|\\*|(?:[0-6])(?:(?:-|\\/|\\,|#)(?:[0-6]))?(?:L)?(?:,(?:[0-6])(?:(?:-|\\/|\\,|#)(?:[0-6]))?(?:L)?)*|\\?|\\*|(?:MON|TUE|WED|THU|FRI|SAT|SUN)(?:(?:-)(?:MON|TUE|WED|THU|FRI|SAT|SUN))?(?:,(?:MON|TUE|WED|THU|FRI|SAT|SUN)(?:(?:-)(?:MON|TUE|WED|THU|FRI|SAT|SUN))?)*)(|\\s)+(\\?|\\*|(?:|\\d{4})(?:(?:-|\\/|\\,)(?:|\\d{4}))?(?:,(?:|\\d{4})(?:(?:-|\\/|\\,)(?:|\\d{4}))?)*))$",
      "description": "Cron表达式"
    },
    "executionStatus": {
      "type": "string",
      "enum": ["PENDING", "RUNNING", "COMPLETED", "FAILED", "CANCELLED"],
      "description": "执行状态"
    },
    "alertType": {
      "type": "string",
      "enum": ["EMAIL", "WEBHOOK", "SLACK", "SMS"],
      "description": "告警类型"
    },
    "enforcement": {
      "type": "string",
      "enum": ["BLOCKING", "WARNING", "INFORMATIONAL"],
      "description": "执行策略"
    }
  }
}
