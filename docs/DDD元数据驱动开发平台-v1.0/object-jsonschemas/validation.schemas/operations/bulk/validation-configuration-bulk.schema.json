{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "object-jsonschemas/validation.schemas/operations/bulk/validation-configuration-bulk.schema.json",
  "title": "验证配置批量操作Schema",
  "description": "验证配置的批量操作Schema，支持批量创建、更新、删除操作",
  "type": "object",
  "properties": {
    "operation": {
      "type": "string",
      "enum": ["CREATE", "UPDATE", "DELETE", "ACTIVATE", "DEACTIVATE"],
      "description": "批量操作类型"
    },
    "data": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "../../full/validation-configuration.schema.json"
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "../../fields/common-fields.schema.json#/$defs/configId"
              },
              "updates": {
                "$ref": "../patch/validation-configuration-patch.schema.json"
              }
            },
            "required": ["id"]
          },
          {
            "type": "object",
            "properties": {
              "id": {
                "$ref": "../../fields/common-fields.schema.json#/$defs/configId"
              }
            },
            "required": ["id"]
          }
        ]
      },
      "minItems": 1,
      "maxItems": 1000,
      "description": "批量操作的数据数组"
    },
    "options": {
      "type": "object",
      "properties": {
        "continueOnError": {
          "type": "boolean",
          "default": false,
          "description": "遇到错误时是否继续执行"
        },
        "validateOnly": {
          "type": "boolean",
          "default": false,
          "description": "仅验证不执行实际操作"
        },
        "batchSize": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 50,
          "description": "批处理大小"
        },
        "timeout": {
          "type": "integer",
          "minimum": 30,
          "maximum": 3600,
          "default": 300,
          "description": "操作超时时间（秒）"
        }
      }
    },
    "metadata": {
      "type": "object",
      "properties": {
        "requestId": {
          "type": "string",
          "pattern": "^[a-zA-Z0-9_-]+$",
          "description": "请求标识符"
        },
        "source": {
          "type": "string",
          "description": "操作来源"
        },
        "reason": {
          "type": "string",
          "description": "操作原因"
        }
      }
    }
  },
  "required": ["operation", "data"],
  "additionalProperties": false,
  "examples": [
    {
      "operation": "CREATE",
      "data": [
        {
          "id": "validation_config_bulk_001",
          "name": "批量创建配置1",
          "type": "BUSINESS_RULE",
          "severity": "ERROR",
          "scope": "PROJECT",
          "isActive": true
        }
      ],
      "options": {
        "continueOnError": true,
        "batchSize": 10
      }
    },
    {
      "operation": "UPDATE",
      "data": [
        {
          "id": "validation_config_001",
          "updates": {
            "isActive": false,
            "severity": "WARNING"
          }
        }
      ]
    },
    {
      "operation": "DELETE",
      "data": [
        {
          "id": "validation_config_002"
        },
        {
          "id": "validation_config_003"
        }
      ],
      "metadata": {
        "requestId": "bulk_delete_20240101",
        "reason": "清理过期配置"
      }
    }
  ]
}
