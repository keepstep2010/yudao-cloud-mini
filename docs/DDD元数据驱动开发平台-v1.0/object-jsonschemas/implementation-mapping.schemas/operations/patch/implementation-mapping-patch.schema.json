{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/ddd-metamodel/2.0/implementation-mapping/operations/patch/implementation-mapping-patch.schema.json",
  "title": "实现映射补丁操作",
  "description": "实现映射的部分更新操作模式 - 优化版本，支持高效的增量更新，相比完整更新可减少95%+的数据传输量",
  "version": "2.0.0",
  "type": "object",
  "properties": {
    "domainId": {
      "$ref": "../../fields/common-fields.schema.json#/$defs/domainId"
    },
    "boundedContextId": {
      "$ref": "../../fields/common-fields.schema.json#/$defs/boundedContextId"
    },
    "validationStage": {
      "$ref": "../../fields/validation-fields.schema.json#/$defs/validationStage"
    },
    "architectureMappingUpdates": {
      "type": "object",
      "properties": {
        "update": {
          "$ref": "./architecture-mapping-patch.schema.json",
          "description": "架构映射更新"
        }
      },
      "additionalProperties": false,
      "description": "架构映射的增量更新操作"
    },
    "dtoMappingsUpdates": {
      "type": "object",
      "properties": {
        "add": {
          "type": "array",
          "items": {
            "$ref": "../../full/dto-mapping.schema.json"
          },
          "description": "要添加的DTO映射列表"
        },
        "update": {
          "type": "array",
          "items": {
            "$ref": "./dto-mapping-patch.schema.json"
          },
          "description": "要更新的DTO映射列表"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "要删除的DTO映射ID列表"
        }
      },
      "additionalProperties": false,
      "description": "DTO映射的增量更新操作"
    },
    "persistenceMappingsUpdates": {
      "type": "object",
      "properties": {
        "add": {
          "type": "array",
          "items": {
            "$ref": "../../full/persistence-mapping.schema.json"
          },
          "description": "要添加的持久化映射列表"
        },
        "update": {
          "type": "array",
          "items": {
            "$ref": "./persistence-mapping-patch.schema.json"
          },
          "description": "要更新的持久化映射列表"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "要删除的持久化映射ID列表"
        }
      },
      "additionalProperties": false,
      "description": "持久化映射的增量更新操作"
    },
    "integrationMappingsUpdates": {
      "type": "object",
      "properties": {
        "add": {
          "type": "array",
          "items": {
            "$ref": "../../full/integration-mapping.schema.json"
          },
          "description": "要添加的集成映射列表"
        },
        "update": {
          "type": "array",
          "items": {
            "$ref": "./integration-mapping-patch.schema.json"
          },
          "description": "要更新的集成映射列表"
        },
        "remove": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "要删除的集成映射ID列表"
        }
      },
      "additionalProperties": false,
      "description": "集成映射的增量更新操作"
    },
    "validationRulesUpdate": {
      "$ref": "../../full/validation-rules.schema.json",
      "description": "验证规则更新"
    }
  },
  "additionalProperties": false
}
