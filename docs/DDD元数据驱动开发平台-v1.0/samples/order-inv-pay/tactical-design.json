{
    "version": "1.0.0",
    "boundedContextId": "bc_order",
    "termReferences": [
      {
        "termId": "term_order_bc",
        "modelElementType": "Aggregate",
        "modelElementPath": "OrderAggregate",
        "mappingType": "DIRECT"
      },
      {
        "termId": "term_order_amount",
        "modelElementType": "EntityAttribute",
        "modelElementPath": "OrderAggregate.OrderEntity.totalAmount",
        "mappingType": "DIRECT"
      },
      {
        "termId": "term_order_status",
        "modelElementType": "EntityAttribute",
        "modelElementPath": "OrderAggregate.OrderEntity.status",
        "mappingType": "DIRECT"
      }
    ],
    "dtoReferences": [
      {
        "dtoId": "dto_create_order_cmd",
        "modelElementType": "ApplicationServiceMethod",
        "modelElementPath": "OrderAppService.createOrder.command",
        "usageType": "PARAMETER",
        "mappingType": "DIRECT"
      },
      {
        "dtoId": "dto_order_response",
        "modelElementType": "ApplicationServiceMethod",
        "modelElementPath": "OrderAppService.createOrder.response",
        "usageType": "RETURN",
        "mappingType": "DIRECT"
      }
    ],
    "aggregates": [
              {
          "name": "OrderAggregate",
          "description": "订单聚合根，维护订单一致性边界",
          "termId": "term_order_bc",
        "rootEntity": "OrderEntity",
        "invariants": [
          "订单总金额必须等于所有订单项金额小计之和",
          "订单状态必须遵循预定义的状态机流转规则",
          "已完成的订单不能再被修改"
        ],
        "entities": [
          {
                        "name": "OrderEntity",
            "description": "订单实体，具有唯一标识和生命周期",
            "termId": "term_order_bc",
            "attributes": [
              {
                "name": "orderId",
                "description": "订单唯一标识",
                "termId": "term_order_id",
                "dataType": "String",
                "required": true,
                "constraints": {
                  "pattern": "^ORD\\d{12}$"
                }
              },
              {
                "name": "status",
                "description": "订单状态",
                "termId": "term_order_status",
                "dataType": "OrderStatusEnum",
                "required": true
              },
              {
                "name": "totalAmount",
                "description": "订单总金额",
                "termId": "term_order_amount",
                "dataType": "BigDecimal",
                "required": true,
                "constraints": {
                  "minimum": 0,
                  "precision": 10,
                  "scale": 2
                }
              },
              {
                "name": "customerId",
                "description": "客户标识",
                "termId": "term_customer_id",
                "dataType": "String",
                "required": true,
                "constraints": {
                  "minLength": 1,
                  "maxLength": 36
                }
              }
            ],
            "methods": [
              {
                "name": "createOrder",
                "description": "创建订单",
                "termId": "term_create_order_method",
                "parameters": [
                  {
                    "name": "command",
                    "dtoId": "dto_create_order_cmd",
                    "description": "创建订单命令",
                    "required": true,
                    "parameterRole": "INPUT",
                    "parameterType": "COMMAND"
                  }
                ],
                "returnType": "OrderEntity",
                "businessLogic": "验证订单信息，设置初始状态，计算总金额",
                "preconditions": [
                  "客户必须存在",
                  "所有商品必须有效"
                ],
                "postconditions": [
                  "订单状态为CREATED",
                  "订单总金额正确计算"
                ]
              },
              {
                "name": "cancelOrder",
                "description": "取消订单",
                "termId": "term_cancel_order_method",
                "parameters": [],
                "returnType": "OrderEntity",
                "businessLogic": "检查订单状态，更新状态为CANCELLED",
                "preconditions": [
                  "订单必须处于可取消状态"
                ],
                "postconditions": [
                  "订单状态为CANCELLED"
                ]
              }
            ]
          },
          {
                        "name": "OrderItemEntity",
            "description": "订单项实体",
            "termId": "term_order_item_entity",
            "attributes": [
              {
                "name": "productId",
                "description": "商品标识",
                "termId": "term_product_id",
                "dataType": "String",
                "required": true
              },
              {
                "name": "quantity",
                "description": "购买数量",
                "termId": "term_order_quantity",
                "dataType": "Integer",
                "required": true,
                "constraints": {
                  "minimum": 1
                }
              },
              {
                "name": "unitPrice",
                "description": "商品单价",
                "termId": "term_unit_price",
                "dataType": "BigDecimal",
                "required": true,
                "constraints": {
                  "minimum": 0,
                  "precision": 10,
                  "scale": 2
                }
              },
              {
                "name": "subtotal",
                "description": "小计金额",
                "termId": "term_order_subtotal",
                "dataType": "BigDecimal",
                "required": true,
                "constraints": {
                  "minimum": 0,
                  "precision": 10,
                  "scale": 2
                }
              }
            ]
          }
        ],
        "valueObjects": [
          {
                        "name": "OrderId",
            "description": "订单ID值对象",
            "termId": "term_order_id_vo",
            "immutable": true,
            "attributes": [
              {
                "name": "value",
                "description": "订单ID值",
                "termId": "term_order_id_value",
                "dataType": "String",
                "required": true,
                "constraints": {
                  "pattern": "^ORD\\d{12}$"
                }
              }
            ],
            "equalityLogic": "基于value字段的值相等性判断"
          },
          {
                        "name": "Address",
            "description": "地址值对象",
            "termId": "term_address_vo",
            "immutable": true,
            "attributes": [
              {
                "name": "province",
                "description": "省份",
                "termId": "term_address_province",
                "dataType": "String",
                "required": true
              },
              {
                "name": "city",
                "description": "城市",
                "termId": "term_address_city",
                "dataType": "String",
                "required": true
              },
              {
                "name": "district",
                "description": "区县",
                "termId": "term_address_district",
                "dataType": "String",
                "required": true
              },
              {
                "name": "detail",
                "description": "详细地址",
                "termId": "term_address_detail",
                "dataType": "String",
                "required": true
              },
              {
                "name": "postalCode",
                "description": "邮政编码",
                "termId": "term_address_postal_code",
                "dataType": "String",
                "constraints": {
                  "minLength": 6,
                  "maxLength": 6
                }
              }
            ],
            "equalityLogic": "所有字段值完全相等"
          }
        ]
      }
    ],
    "domainServices": [
      {
        "name": "OrderCreationService",
        "description": "订单创建领域服务",
        "termId": "term_order_creation_service",
        "methods": [
          {
            "name": "createOrder",
            "description": "创建新订单",
            "termId": "term_order_creation_method",
            "parameters": [
              {
                "name": "command",
                "dtoId": "dto_create_order_cmd",
                "description": "创建订单命令",
                "required": true,
                "parameterRole": "INPUT"
              }
            ],
            "returnType": "OrderEntity",
            "businessLogic": "协调订单创建过程：验证库存、计算金额、创建订单、预留库存",
            "preconditions": [
              "客户必须存在",
              "库存必须充足"
            ],
            "postconditions": [
              "订单被创建并处于CREATED状态",
              "库存被相应预留"
            ]
          }
        ]
      }
    ],
    "domainEvents": [
      {
        "name": "OrderCreatedEvent",
        "description": "订单创建事件",
        "termId": "term_order_created_event",
        "properties": [
          {
            "name": "orderId",
            "description": "订单ID",
            "termId": "term_order_id_property",
            "dataType": "String",
            "required": true
          },
          {
            "name": "customerId",
            "description": "客户ID",
            "termId": "term_customer_id_property",
            "dataType": "String",
            "required": true
          },
          {
            "name": "totalAmount",
            "description": "订单总金额",
            "termId": "term_order_amount",
            "dataType": "BigDecimal",
            "required": true
          }
        ],
        "subscribers": [
          {
            "contextId": "bc_payment",
            "handlerName": "PaymentEventHandler",
            "description": "处理订单创建事件，准备支付流程"
          },
          {
            "contextId": "bc_inventory",
            "handlerName": "InventoryEventHandler",
            "description": "处理订单创建事件，预留库存"
          }
        ]
      },
      {
        "name": "OrderCancelledEvent",
        "description": "订单取消事件",
        "termId": "term_order_cancelled_event",
        "properties": [
          {
            "name": "orderId",
            "description": "订单ID",
            "termId": "term_order_id_property",
            "dataType": "String",
            "required": true
          },
          {
            "name": "reason",
            "description": "取消原因",
            "termId": "term_cancel_reason",
            "dataType": "String"
          }
        ],
        "subscribers": [
          {
            "contextId": "bc_inventory",
            "handlerName": "InventoryEventHandler",
            "description": "处理订单取消事件，释放库存"
          },
          {
            "contextId": "bc_payment",
            "handlerName": "PaymentEventHandler",
            "description": "处理订单取消事件，处理退款"
          }
        ]
      }
    ],
    "repositories": [
      {
        "name": "OrderRepository",
        "description": "订单仓储接口",
        "interfaceName": "OrderRepository",
        "implementationName": "OrderRepositoryImpl",
        "methods": [
          {
            "name": "findById",
            "description": "根据ID查找订单",
            "termId": "term_order_repo_find_by_id",
            "parameters": [
              {
                "name": "orderId",
                "description": "订单ID",
                "simpleType": "String",
                "required": true
              }
            ],
            "returnType": "Optional<OrderEntity>"
          },
          {
            "name": "save",
            "description": "保存订单",
            "termId": "term_order_repo_save",
            "parameters": [
              {
                "name": "order",
                "description": "订单实体",
                "dtoId": "dto_order_entity",
                "required": true
              }
            ],
            "returnType": "OrderEntity"
          },
          {
            "name": "findByCustomerId",
            "description": "根据客户ID查找订单",
            "termId": "term_order_repo_find_by_customer",
            "parameters": [
              {
                "name": "customerId",
                "description": "客户ID",
                "simpleType": "String",
                "required": true
              },
              {
                "name": "pageable",
                "description": "分页参数",
                "simpleType": "Pageable"
              }
            ],
            "returnType": "Page<OrderEntity>"
          }
        ]
      }
    ],
    "factories": [
      {
        "name": "OrderFactory",
        "description": "订单工厂",
        "methods": [
          {
            "name": "createOrder",
            "description": "创建订单实体",
            "termId": "term_order_factory_create",
            "parameters": [
              {
                "name": "command",
                "dtoId": "dto_create_order_cmd",
                "description": "创建订单命令",
                "required": true
              }
            ],
            "returnType": "OrderEntity",
            "businessLogic": "根据命令创建订单实体，设置初始状态和属性"
          }
        ]
      }
    ],
    "modules": [
      {
        "name": "OrderCoreModule",
        "description": "订单核心模块",
        "packageName": "com.example.order.core",
        "dependencies": []
      },
      {
        "name": "OrderApplicationModule",
        "description": "订单应用模块",
        "packageName": "com.example.order.application",
        "dependencies": ["OrderCoreModule"]
      },
      {
        "name": "OrderInfrastructureModule",
        "description": "订单基础设施模块",
        "packageName": "com.example.order.infrastructure",
        "dependencies": ["OrderCoreModule"]
      }
    ],
    "enums": [
        {
          "name": "OrderStatusEnum",
          "description": "订单状态枚举",
          "termId": "term_order_status",
        "values": [
          {
            "name": "CREATED",
            "description": "已创建",
            "termId": "term_order_status_created",
            "value": "CREATED"
          },
          {
            "name": "PAID",
            "description": "已支付",
            "termId": "term_order_status_paid",
            "value": "PAID"
          },
          {
            "name": "SHIPPED",
            "description": "已发货",
            "termId": "term_order_status_shipped",
            "value": "SHIPPED"
          },
          {
            "name": "COMPLETED",
            "description": "已完成",
            "termId": "term_order_status_completed",
            "value": "COMPLETED"
          },
          {
            "name": "CANCELLED",
            "description": "已取消",
            "termId": "term_order_status_cancelled",
            "value": "CANCELLED"
          }
        ]
      }
    ]
  }